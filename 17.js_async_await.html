<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>async-await</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="container py-3">
        <section class="mb-4">
            <h1>async-await</h1>
        </section>
    </div>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script>
        // async: 함수 전체가 비동기임을 의미
        // await: 비동기함수 내에서 각 함수의 호출에 동기성을 보장하기 위한 키워드
        const requestPost = () => {
            return $.ajax({
                url: "https://jsonplaceholder.typicode.com/posts/1",
                type: "GET",
                dataType: "json",
            });
        };

        const dataRequest = async () => {
            try {
                const result1 = await requestPost();
                console.log("B");
                console.log(result1);

                const result2 = await requestPost();
                console.log("C");
                console.log(result2);

                const result3 = await requestPost();
                console.log("D");
                console.log(result3);
            } catch (e) {
                console.log("error", e);
            }
        };

        $(document).ready(() => {
            dataRequest();
            console.log("A");
        });
    </script>
</body>

</html>